---
global:
  evaluation_interval: 1m
  scrape_interval: 30s

scrape_configs:
  - job_name: "grafana"
    static_configs:
      - targets:
        - "grafana:3000"

  - job_name: "prometheus"
    scrape_interval: 5s
    static_configs:
      - targets:
        - "localhost:9090"

  - job_name: "node_exporter"
    static_configs:
      - targets:
{% for host in groups['all'] %}
        - "{{ host }}:9100"
{% endfor %}

  - job_name: blackbox
    static_configs:
      - targets:
        - "blackbox-exporter:9115"

  - job_name: blackbox-ping
    metrics_path: /probe
    params:
      module:
        - icmp
    static_configs:
      - targets:
        - "ferrarimarco.info"
        - "github.com"
        - "google.com"
        - "smart-desk.edge.lab.ferrari.how"
{% for host in groups['all'] %}
        - "{{ host }}"
{% endfor %}
    relabel_configs:
      - source_labels: [__address__]
        target_label: __param_target
      - source_labels: [__param_target]
        target_label: instance
      - target_label: __address__
        replacement: blackbox-exporter:9115 # Blackbox exporter hostname:port.
...
